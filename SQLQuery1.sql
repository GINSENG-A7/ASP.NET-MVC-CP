SELECT a.id, a.apartmenttypeid, a.price FROM Apartments a WHERE a.price > 0 AND a.price < 999999 AND ((a.id IN (SELECT apartmentsid FROM Livings WHERE eviction < '2021-05-25') AND NOT EXISTS(SELECT apartmentsid FROM Bookings WHERE a.id IN (SELECT apartmentsid FROM Bookings))) OR (a.id in (SELECT apartmentsid FROM Bookings WHERE settling > '2021-05-26') OR (a.id in (SELECT apartmentsid FROM Bookings WHERE eviction < '2021-05-25'))) AND NOT EXISTS(SELECT apartmentsid FROM Livings WHERE a.id IN (SELECT apartmentsid FROM Livings)) OR ((a.id in (SELECT apartmentsid FROM Livings WHERE eviction<'2021-05-25')) AND (a.id in (SELECT apartmentsid FROM Bookings WHERE settling>'2021-05-26') OR (a.id in (SELECT apartmentsid FROM Bookings WHERE eviction<'2021-05-25')))) OR (a.id NOT IN (SELECT apartmentsid FROM Livings) AND a.id NOT IN (SELECT apartmentsid FROM Bookings)))