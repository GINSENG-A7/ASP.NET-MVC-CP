@model IEnumerable<Lab1.Models.Client>

@{
    ViewBag.Title = "Index";
}

<h2>Клиенты</h2>

<p>
    @Html.ActionLink("Добавить", "Create")
</p>

@using (Html.BeginForm("SearchWithValues", "Clients", FormMethod.Post))
{
    <div class="col-lg-2">
        <input class="form-control text-box " name="searchableSurname" type="text" value="" placeholder="Фамилия">
    </div>
    <div class="col-lg-2">
        <input class="form-control text-box " name="searchableName" type="text" value="" placeholder="Имя">
    </div>
    <div class="col-lg-2">
        <input class="form-control text-box " name="searchablePatronymic" type="text" value="" placeholder="Отчество">
    </div>
    <div class="col-lg-2">
        <input class="form-control text-box " name="searchableTelephone" type="text" value="" placeholder="Телефон">
    </div>
    <div class="col-lg-2">
        <input class="btn btn-primary" name="search" type="submit" value="Найти">
    </div>
}
<br>
<table class="table">
    <tr>
        <th>
            @Html.DisplayName("Имя")
        </th>
        <th>
            @Html.DisplayName("Фамилия")
        </th>
        <th>
            @Html.DisplayName("Отчество")
        </th>
        <th>
            @Html.DisplayName("Серия паспорта")
        </th>
        <th>
            @Html.DisplayName("Номер паспорта")
        </th>
        <th>
            @Html.DisplayName("Дата рождения")
        </th>
        <th>
            @Html.DisplayName("Телефон")
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Surname)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Patronymic)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.PassportNumber)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.PassportSeries)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Birgthday)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Telephone)
            </td>
            @if(item.Livings.Count > 0 || item.Bookings.Count > 0)
            {
                <td>
                    @Html.ActionLink("Редактировать", "Edit", new { id = item.Id }) |
                    @Html.ActionLink("Просмотр", "Details", new { id = item.Id }) |
                    @Html.ActionLink("Добавить проживание", "AddLiving", new { id = item.Id }) |
                    @Html.ActionLink("Добавить бронь", "AddBooking", new { id = item.Id })
                </td>
            }
            else
            {
                <td>
                    @Html.ActionLink("Редактировать", "Edit", new { id = item.Id }) |
                    @Html.ActionLink("Просмотр", "Details", new { id = item.Id }) |
                    @Html.ActionLink("Удалить", "Delete", new { id = item.Id }) |
                    @Html.ActionLink("Добавить проживание", "AddLiving", new { id = item.Id }) |
                    @Html.ActionLink("Добавить бронь", "AddBooking", new { id = item.Id })
                </td>
            }
        </tr>
    }

</table>
